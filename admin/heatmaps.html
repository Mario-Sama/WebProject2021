<!DOCTYPE html>
<html lang="en" dir="ltr">

  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" type="image/x-icon" href="docs/images/favicon.ico">

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
  integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
  crossorigin=""/>

  <!-- Make sure you put this AFTER Leaflet's CSS -->
 <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
   integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
   crossorigin=""></script>


    <title>Heatmaps</title>
  </head>


  <body>


    <body>



<div id="mapid" style="width: 1920px; height: 1080px; position: relative;" class="leaflet-container leaflet-touch leaflet-fade-anim leaflet-grab leaflet-touch-drag leaflet-touch-zoom" tabindex="0">
  <div class="leaflet-pane leaflet-map-pane" style="transform: translate3d(0px, 0px, 0px);">
    <div class="leaflet-pane leaflet-tile-pane">
      <div class="leaflet-layer " style="z-index: 1; opacity: 1;">
        <div class="leaflet-tile-container leaflet-zoom-animated" style="z-index: 17; transform: translate3d(214px, 112px, 0px) scale(0.5);"></div>
        <div class="leaflet-tile-container leaflet-zoom-animated" style="z-index: 18; transform: translate3d(214px, 111px, 0px) scale(1);"><img alt="" role="presentation" src="https://api.mapbox.com/styles/v1/mapbox/streets-v11/tiles/11/1023/680?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw" class="leaflet-tile leaflet-tile-loaded" style="width: 512px; height: 512px; transform: translate3d(-100px, -429px, 0px); opacity: 1;">
          <img alt="" role="presentation" src="https://api.mapbox.com/styles/v1/mapbox/streets-v11/tiles/11/1023/681?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw" class="leaflet-tile leaflet-tile-loaded" style="width: 512px; height: 512px; transform: translate3d(-100px, 83px, 0px); opacity: 1;">
          <img alt="" role="presentation" src="https://api.mapbox.com/styles/v1/mapbox/streets-v11/tiles/11/1022/680?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw" class="leaflet-tile leaflet-tile-loaded" style="width: 512px; height: 512px; transform: translate3d(-612px, -429px, 0px); opacity: 1;">
          <img alt="" role="presentation" src="https://api.mapbox.com/styles/v1/mapbox/streets-v11/tiles/11/1022/681?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw" class="leaflet-tile leaflet-tile-loaded" style="width: 512px; height: 512px; transform: translate3d(-612px, 83px, 0px); opacity: 1;">
        </div></div></div><div class="leaflet-pane leaflet-shadow-pane"><img src="https://unpkg.com/leaflet@1.7.1/dist/images/marker-shadow.png" class="leaflet-marker-shadow leaflet-zoom-animated" alt="" style="margin-left: -12px; margin-top: -41px; width: 41px; height: 41px; transform: translate3d(364px, 235px, 0px);">
        </div><div class="leaflet-pane leaflet-overlay-pane"><svg pointer-events="none" class="leaflet-zoom-animated" width="720" height="480" viewBox="-60 -40 720 480" style="transform: translate3d(-60px, -40px, 0px);">
          <g><path class="leaflet-interactive" stroke="red" stroke-opacity="1" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" fill="#f03" fill-opacity="0.5" fill-rule="evenodd" d="M284.60177777777426,197.47352300095372a21,21 0 1,0 42,0 a21,21 0 1,0 -42,0 "></path>
            <path class="leaflet-interactive" stroke="#3388ff" stroke-opacity="1" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" fill="#3388ff" fill-opacity="0.2" fill-rule="evenodd" d="M393 193L451 221L489 188z"></path></g></svg></div>
            <div class="leaflet-pane leaflet-marker-pane"><img src="https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon.png" class="leaflet-marker-icon leaflet-zoom-animated leaflet-interactive" alt="" tabindex="0" style="margin-left: -12px; margin-top: -41px; width: 25px; height: 41px; transform: translate3d(364px, 235px, 0px); z-index: 235;"></div>
            <div class="leaflet-pane leaflet-tooltip-pane"></div><div class="leaflet-pane leaflet-popup-pane"><div class="leaflet-popup  leaflet-zoom-animated" style="opacity: 1; transform: translate3d(365px, 201px, 0px); bottom: -7px; left: -57px;"><div class="leaflet-popup-content-wrapper">
              <div class="leaflet-popup-content" style="width: 74px;"><b>Location of the current user!</b><br></div></div><div class="leaflet-popup-tip-container"><div class="leaflet-popup-tip"></div></div><a class="leaflet-popup-close-button" href="#close">×</a></div></div>
              <div class="leaflet-proxy leaflet-zoom-animated" style="transform: translate3d(523962px, 348678px, 0px) scale(2048);"></div></div>
              <div class="leaflet-control-container"><div class="leaflet-top leaflet-left">
                <div class="leaflet-control-zoom leaflet-bar leaflet-control">
                  <a class="leaflet-control-zoom-in" href="#" title="Zoom in" role="button" aria-label="Zoom in">+</a>
                  <a class="leaflet-control-zoom-out" href="#" title="Zoom out" role="button" aria-label="Zoom out">−</a></div>
                </div><div class="leaflet-top leaflet-right"></div><div class="leaflet-bottom leaflet-left"></div>
                <div class="leaflet-bottom leaflet-right"><div class="leaflet-control-attribution leaflet-control">
                  <a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a> | Map data © <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>
                </div>
              </div>
            </div>
          </div>
<script>

var mymap = L.map('mapid').setView([38.281351, 21.766968], 16);

L.tileLayer('https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {
  maxZoom: 18,
  attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, ' +
    'Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
  id: 'mapbox/streets-v11',
  tileSize: 512,
  zoomOffset: -1
}).addTo(mymap);

L.marker([38.282268, 21.765828]).addTo(mymap)
  .bindPopup("<b>Location of Mario !</b>").openPopup();

L.marker([38.280295, 21.772952]).addTo(mymap)
    .bindPopup("<b>Location !</b>").openPopup();

L.marker([38.281351, 21.767968]).addTo(mymap)
      .bindPopup("<b>Location of current User!</b>").openPopup();

    L.marker([38.281360, 21.766950]).addTo(mymap)
    .bindPopup("<b>Location 3!</b>").openPopup();






let ip = [];
let node = {};
$.ajax({
        url: "AJAX/requestedserverIP.php",
        method: "get",
        success: function(res) {
          console.log(res);
          res = res.replaceAll('[','');
          ip = res.split("]");
          // console.log(ip);
          // for (i = 0; i < ip.length; i++) {
          //   ip = ip[i].replace('[','');
          // }
          console.log(ip);
          const nodeList = [];
          for (let i = 0; i <= ip.length; i++) {
            $.ajax({
              url: 'https://ipapi.co/' + ip[i] + '/json/' ,   //url: 'http://api.ipapi.com/' + ip[i] + '?88b994663645ad5e9fa0b0c829df23b4=',
              dataType: 'json',
              success: function(ipData) {
                // output the "calling_code" object inside "location"
                //alert(json.location.calling_code);
                //location.push
                //console.log(ipData.latitude);
                //node.lat = ipData.latitude;
                //node.lng = ipData.longitude;
                console.log(node);
                console.log(ipData.latitude);
                console.log(ipData.longitude);
                nodeList.push(node);
              //  marker.setLatLng([json.latitude, json.longitude])
                L.marker([ipData.latitude,ipData.longitude]).addTo(mymap)
          .bindPopup("<b>IP OF SERVER</b>").openPopup();
              }
            });

          // for (i = 0; i < 50; i++) {
          //   L.marker([, 21.766968]).addTo(mymap)
          //         .bindPopup("<b>Location of current User!</b>").openPopup();
          //       }
          }
        }
      });





/*
L.polygon([
  [38.282268, 21.765828],
  [38.280295, 21.772952],
  [38.281351, 21.766968],
  [38.281349, 21.766965]
]).addTo(mymap).bindPopup("I am a polygon.");
*/
// create a red polyline from an array of LatLng points
var latlngs = [
    [45.51, -122.68],
    [37.77, -122.43],
    [34.04, -118.2]
];

//var polyline = L.polyline(latlngs, {color: 'red'}).addTo(mymap);

// zoom the map to the polyline
mymap.fitBounds(polyline.getBounds());

var popup = L.popup();

function onMapClick(e) {
  popup
    .setLatLng(e.latlng)
    .setContent("You clicked the map at " + e.latlng.toString())
    .openOn(mymap);
}

mymap.on('click', onMapClick);

</script>





</body>


  </body>



</html>
